<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>React — The State Bait and This Dot Problems</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">React — The State Bait and This Dot Problems</h1>
</header>
<section data-field="subtitle" class="p-summary">
One of the things that make React quite intimidating for new users is that there are some concepts that need to be grasped before jumping…
</section>
<section data-field="body" class="e-content">
<section name="0c8f" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="04df" id="04df" class="graf graf--h3 graf--leading graf--title">React — The State Bait and This Dot Problems</h3><p name="58c4" id="58c4" class="graf graf--p graf-after--h3">One of the things that make <a href="https://hackernoon.com/tagged/react" data-href="https://hackernoon.com/tagged/react" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">React</a> quite intimidating for new users is that there are some concepts that need to be grasped before jumping in.</p><p name="fa67" id="fa67" class="graf graf--p graf-after--p">Its important to learn ES6 anyways, but for the patterns and structures used its especially useful for our favourite componentized frameworks. That being said, you can still use ES5 to get it to work, but for the sake of consistency ES6 is the way to go!</p><figure name="ca6e" id="ca6e" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 467px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 66.7%;"></div><img class="graf-image" data-image-id="0*k8RvKPa9iqlaXM7Y" data-width="6000" data-height="4000" src="https://cdn-images-1.medium.com/max/800/0*k8RvKPa9iqlaXM7Y"></div><figcaption class="imageCaption">Create websites with React.js!</figcaption></figure><p name="e204" id="e204" class="graf graf--p graf-after--figure">Stop living in the past and move with the times, bruh!! :P</p><h3 name="4629" id="4629" class="graf graf--h3 graf-after--p">Don’t Mutate the State, Mate!</h3><p name="28b6" id="28b6" class="graf graf--p graf-after--h3">Most of the time this isn’t a good idea anyways, but its especially true for building front end projects. Changing the original initiated state can cause a lot of problems when things go wrong, it can make it hard to keep track of where bugs are coming from.</p><p name="dd88" id="dd88" class="graf graf--p graf-after--p">Here we got a shop, lets add an item…</p><pre name="f0bc" id="f0bc" class="graf graf--pre graf-after--p">class App extends Component { <br>    constructor(props) {  <br>        super(props);  <br>            this.state = { shop:[] }; <br>    }</pre><pre name="96db" id="96db" class="graf graf--pre graf-after--pre">...//</pre><pre name="d6a6" id="d6a6" class="graf graf--pre graf-after--pre">onAdd = (item) =&gt; {  <br>    this.state.shop.push(item);<br>};</pre><p name="dd94" id="dd94" class="graf graf--p graf-after--pre">To the untrained eye this is how you might think to do it. But this is a classic common situation in which we’re changing the original state which is a huge no-no in functional programming.</p><pre name="6476" id="6476" class="graf graf--pre graf-after--p">onAdd = (item) =&gt; { <br>    let newList = this.state.shop;<br>    newList = newList.concat(item);<br>    this.setState({ shop: newList })</pre><pre name="e12e" id="e12e" class="graf graf--pre graf-after--pre">};</pre><p name="b836" id="b836" class="graf graf--p graf-after--pre">Concat is a method which combines two arrays into a new one. Here we grab the shop array (empty for now) and combine it with the item into a new array. Then we use React’s setState to modify the current state, instead of directly doing it ourselves.</p><pre name="a27b" id="a27b" class="graf graf--pre graf-after--p">onAdd = (item) =&gt; {<br>    let newList = this.state.shop;<br>    newList = [...newList, item];<br>    this.setState({ shop: newList })</pre><p name="b035" id="b035" class="graf graf--p graf-after--pre">Most of the time we use the ES6 ‘version’ of combining the arrays with the spread operator. The ‘…’ allows an existing array to be referenced but not modified, meaning we don’t mutate the original array.</p><p name="a801" id="a801" class="graf graf--p graf-after--p">Making sure that we never directly mutate the state is great practice, and we want to get in the mindset of doing that all the time.</p><h3 name="3c6d" id="3c6d" class="graf graf--h3 graf-after--p">Bind Off Your ‘This’ Problems with Arrow Functions</h3><p name="0ebe" id="0ebe" class="graf graf--p graf-after--h3">As you may or may not have noticed, the functions written above seem to be in a strange format. Notice there is no function keywords and for more advanced coders therefore no bind methods either.</p><p name="77d2" id="77d2" class="graf graf--p graf-after--p">As we pass data around in our components, we are use the <code class="markup--code markup--p-code">this.[function]</code> to refer to functions elsewhere, but because of the lexical scope the <code class="markup--code markup--p-code">this</code> isn’t referring to where we want it to.</p><p name="29b3" id="29b3" class="graf graf--p graf-after--p">Arrow functions are a different way of writing functions but with the main advantage of the fact that it stops the <code class="markup--code markup--p-code">this</code> keyword from being limited to within that function.</p><pre name="dc32" id="dc32" class="graf graf--pre graf-after--p">class ParentComponent extends Component {<br>    render() {<br>        return (<br>            &lt;div&gt;<br>                &lt;ChildComponent <br>                parentFunction=&quot;this.parentFunction&quot; <br>                /&gt;<br>            &lt;/div&gt;<br>        )<br>    };</pre><pre name="9c6b" id="9c6b" class="graf graf--pre graf-after--pre">function parentFunction() {<br>        console.log(&quot;Button is clicked!&quot;)<br>    }<br>}</pre><pre name="11b4" id="11b4" class="graf graf--pre graf-after--pre">class ChildComponent extends Component {<br>    render() {<br>        return (<br>            &lt;div&gt;<br>                &lt;button onClick={this.handleClick}&gt;<br>                    Click Me!<br>                &lt;/button&gt;<br>            &lt;/div&gt;<br>        )<br>    };</pre><pre name="e5c2" id="e5c2" class="graf graf--pre graf-after--pre">    handleClick = () =&gt; {<br>        this.props.parentFunction();<br>    }<br>}</pre><p name="6a3a" id="6a3a" class="graf graf--p graf-after--pre">Here in this child component we have a button that when clicked, uses the parentFunction props that has been passed down from the parent component.</p><p name="8991" id="8991" class="graf graf--p graf-after--p">The fact that parentFunction has been passed down using the <code class="markup--code markup--p-code">function</code> keyword will make the <code class="markup--code markup--p-code">this</code> keyword not refer to what we want if it has been written without arrow functions.</p><p name="8041" id="8041" class="graf graf--p graf-after--p">The ES5 way of solving this problem is to use the <code class="markup--code markup--p-code">bind</code> method but this meant every function passed down would have to be bound, and with a lot of function it would not be scaleable.</p><p name="02f1" id="02f1" class="graf graf--p graf-after--p">So just use <code class="markup--code markup--p-code">[name] = () =&gt; {}</code> to save yourself <code class="markup--code markup--p-code">this</code> scoping problems!</p><p name="2943" id="2943" class="graf graf--p graf-after--p">Another common scenario is when your DOM events need a parameter.</p><pre name="ace1" id="ace1" class="graf graf--pre graf-after--p"><strong class="markup--strong markup--pre-strong">Using ES6 Arrow Functions</strong></pre><pre name="477c" id="477c" class="graf graf--pre graf-after--pre"><code class="markup--code markup--pre-code">&lt;button onClick={(event) =&gt; this.deleteRow(id, event)}&gt;Delete Row&lt;/button&gt;</code></pre><pre name="1ebf" id="1ebf" class="graf graf--pre graf-after--pre"><em class="markup--em markup--pre-em">// Events as parameters are explicit so can be even shorter!</em></pre><pre name="ac4e" id="ac4e" class="graf graf--pre graf-after--pre"><code class="markup--code markup--pre-code">&lt;button onClick={() =&gt; this.deleteRow(id)}&gt;Delete Row&lt;/button&gt;</code></pre><pre name="8d0f" id="8d0f" class="graf graf--pre graf-after--pre"><strong class="markup--strong markup--pre-strong">Using ES5 Bind</strong></pre><pre name="2851" id="2851" class="graf graf--pre graf-after--pre"><code class="markup--code markup--pre-code">&lt;button onClick={this.deleteRow.bind(this, id)}&gt;Delete Row&lt;/button&gt;</code></pre><p name="fbfb" id="fbfb" class="graf graf--p graf-after--pre">Definitely looks cleaner and needs less maintenance. We don’t have to keep track of all our binds, and therefore less prone to mistakes. Its also more readable and looks cleaner overall!</p><h3 name="80b5" id="80b5" class="graf graf--h3 graf-after--p">Get 2 Grips w/ES6!</h3><p name="cc29" id="cc29" class="graf graf--p graf-after--h3">If you didn’t know these concepts and jumped right in, it definitely can be quite a challenge to understand. Learning the ES6 updates are pretty essential to learning React, which can be quite beginner unfriendly.</p><p name="10e2" id="10e2" class="graf graf--p graf-after--p">Either way, as <a href="https://hackernoon.com/tagged/javascript" data-href="https://hackernoon.com/tagged/javascript" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Javascript</a> evolves and defies all the odds and keeps surviving onwards its becoming more apparent that it is important to keep up to date with all the new features added.</p><p name="dd86" id="dd86" class="graf graf--p graf-after--p">These days I try to keep things consistent by using as much ES6 syntax as possible, and Air Bnb linting. The fact that you can do so many things in different ways can be quite daunting for an aspiring newbie.</p><p name="6b98" id="6b98" class="graf graf--p graf-after--p">Anyways, hope that is helpful, have a great week!</p><figure name="92ee" id="92ee" class="graf graf--figure graf--iframe graf-after--p graf--trailing"><iframe src="https://upscri.be/dde502?as_embed=true" width="700" height="350" frameborder="0" scrolling="no"></iframe></figure></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@pyan" class="p-author h-card">Puyan Wei</a> on <a href="https://medium.com/p/88090a73b8e3"><time class="dt-published" datetime="2018-09-23T22:40:50.743Z">September 23, 2018</time></a>.</p><p><a href="https://medium.com/@pyan/es6sential-react-the-state-bait-this-problems-88090a73b8e3" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on September 30, 2019.</p></footer></article></body></html>